@model Yukidzaki_Domain.ViewModels.FilterVM
<div class="row" id="tokenCardGalleryCount" value="@Model.tokensCount">
@if (Model.Tokens.Count() > 0)
{

    @foreach (var token in Model.Tokens)
    {
        <partial name="_IndividualTokenCard" model="token" />

        //display all product
    }
        
}
else
{
    <p> No tokens exists.</p>
}

</div> 

@*<script type="text/javascript">
    $(function () {

        
        pageLimit = Math.floor(document.getElementById("tokenCardGalleryCount").getAttribute('value')/10);
        console.log(pageLimit);
        var page = 0;
        
        var _inCallback = false;
        function loadItems() {
            if (localStorage.getItem("page")) {
                console.log(localStorage.getItem("page"));
                page = localStorage.getItem("page");
                localStorage.removeItem("page");
            }
            if (page > -1 && !_inCallback) {
                _inCallback = true;
                page++;
                if(page<=pageLimit)
                {

                
                console.log(page);
                var filtersPageVM = {
                    tokensFilters: null,
                    page : page
                };

                $.ajax({
                    type: 'POST',
                    url: '/Gallery/Filter/',
                    contentType: 'application/json',
                    data: JSON.stringify(filtersPageVM),
                    success: function (data, textstatus) {
                        if (data != '') {
                            $("#tokenCardGalleryCount").append(data);
                        }
                        else {
                            page = -1;
                        }
                        _inCallback = false;
                        $("div#loading").hide();
                    }
                });

                }
            }
        }
        // обработка события скроллинга
        $(window).scroll(function () {
            if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                console.log("scroll");
                loadItems();
            }
        });
    })
</script>*@